"use strict";function documentReady(t){"loading"!=document.readyState?t():document.addEventListener("DOMContentLoaded",t)}function findBisect(t,e){var n=0,r=e.length-1,i=e[n];if(i>=t)return{val:n,part:0};var a=e[r];if(a<t)return{val:r,part:0};for(;r-n>1;){var l=n+Math.round((r-n)/2),o=e[l];o>=t?(r=l,a=o):(n=l,i=o)}return{val:n,part:(t-i)/(a-i)}}function substrCount(t,e){for(var n=-1,r=-2;-1!=r;)n++,r=e.indexOf(t,r+1);return n}function selectText(t){if(window.getSelection){var e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}}function Animator(t,e){var n,r,i,a,l,o=0,s=0,c=0,u=0,f=200,v=null,d=function(t){null===v&&(v=t);var s=t-v;s<r?(o=c+i*(Math.cos(a*(s-r))-1),u=i*a*Math.sin(a*(r-s)),e(o),n=requestAnimationFrame(d),h&&(m(l,o),h=!1,v=t)):(v=null,u=0,e(c),cancelAnimationFrame(n),h&&(h=!1))},h=!1;function m(t,e){var n;if(c=t,s=e,Math.abs(u)<1e-5)n=Math.PI,r=f;else{var l=(c-s)/u/f;n=l<0||l>.5?Math.PI*Math.sqrt(1-.5/l):.1;var o=(1-Math.cos(n))/n/Math.sin(n);r=(c-s)/o/u}a=n/r,i=(c-s)/(1-Math.cos(n))}this.setPos=function(e){(h=null!==v)?l=e:(m(e,o=t()),n=requestAnimationFrame(d))},this.stop=function(){v=null,u=0,cancelAnimationFrame(n),h=!1}}function escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ImagePreloader(){var t={},e=0;function n(){var t;t=this.status>=200&&this.status<400?this.responseText:'<svg height="24" version="1.1" width="24" xmlns="http://www.w3.org/2000/svg"><g transform="translate(0 -1028.4)"><path d="m22 12c0 5.523-4.477 10-10 10-5.5228 0-10-4.477-10-10 0-5.5228 4.4772-10 10-10 5.523 0 10 4.4772 10 10z" fill="#742600" transform="translate(0 1029.4)"/><path d="m22 12c0 5.523-4.477 10-10 10-5.5228 0-10-4.477-10-10 0-5.5228 4.4772-10 10-10 5.523 0 10 4.4772 10 10z" fill="#AB562B" transform="translate(0 1028.4)"/><path d="m7.0503 1037.8 3.5357 3.6-3.5357 3.5 1.4142 1.4 3.5355-3.5 3.536 3.5 1.414-1.4-3.536-3.5 3.536-3.6-1.414-1.4-3.536 3.5-3.5355-3.5-1.4142 1.4z" fill="#742600"/><path d="m7.0503 1036.8 3.5357 3.6-3.5357 3.5 1.4142 1.4 3.5355-3.5 3.536 3.5 1.414-1.4-3.536-3.5 3.536-3.6-1.414-1.4-3.536 3.5-3.5355-3.5-1.4142 1.4z" fill="#ecf0f1"/></g></svg>',i(this.responseURL||this.s2Url,t,this.prefix)}function r(t,e){var r=new XMLHttpRequest;return r.open("GET",t,!0),r.s2Url=t,r.prefix=e,r.onload=n,r.onerror=function(){},r.send(),r}this.onLoad=function(e,n,i){t[e]?null!==t[e].svg&&n(e,t[e].svg,t[e].baseline,i):t[e]={svg:null,baseline:null,request:r(e,i),callback:n}};var i=function(n,r,i){var a=t[n];if(a){var l=(r=function(t){var n=t.match(/id=["']([^"']*)["']/g);if(!n)return t;for(var r,i,a,l=n.length;l--;)r=(a=n[l]).match(/id=["']([^"']*)["']/)[1],i="s"+e+r,t=t.replaceAll(a,'id="'+i+'"').replaceAll("#"+r,"#"+i);return e++,t}(r)).match(/postMessage\((?:&quot;|")([\d\|\.\-eE]*)(?:&quot;|")/);if(l)var o=l&&l[1]?l[1].split("|").shift():0;else o=null;a.callback(n,r,o,i),a.svg=r,a.baseline=o,a.request=null,a.callback=null}};this.getImageDataFromUrl=function(e){var n=t[e];return n||null}}function ImageLoader(t,e,n){var r=[],i=[],a={},l=0,o=null,s=null,c=null,u=1;this.loaderid=n,this.reset=function(){r=[],l=0,u=1};var f=function(t,e,n,r){var i,l=a[t];if(l&&(i=l.length))for(;i--;){var f=l[i];v(f,e,n,f===s?"fade-in":"replace",r)&&(u+=1),f===s&&(clearTimeout(o),s=null,c=null)}};function v(t,e,n,r,i){var a=i+"s2tex_"+t,l=document.getElementById(a),s=l.parentNode,c="fade-out"==r?"0.5":"1",f='<svg class="svg-preview" id="'+a+'" ',v=!1;if("center"===s.style.textAlign&&(s.id.match(/eq\:.*$/)&&1==s.childElementCount)){v=!0;var d=document.createElement("em");d.innerHTML="("+u+")";var h=document.createElement("span");s.insertBefore(d,l),s.appendChild(h)}var m=e.match(/ height="[\.\d]+" /g)[0].trim().split("=")[1].replace(/"/g,"");f+=null===n?'width="13px" height="13px" ':'style="--latex_align: '+-n+"pt; --latex_height: "+m+"px; vertical-align:"+-n+'pt; opacity: 1" ';var p=document.createElement("div");p.innerHTML=e.replace("<svg ",f);var g=p.firstElementChild;return p.removeChild(g),s.insertBefore(g,l),s.removeChild(l),"1"!=c&&(o=setTimeout(function(){document.getElementById(a).style.opacity=c},0)),v}this.getHtmlStub=function(t){r[l]="https://mur2.co.uk/math/svg/"+encodeURIComponent(t);var e='<span id="'+this.loaderid+"s2tex_"+l+'"></span>';return l++,e},this.fixDom=function(){!function(){if(l==i.length){for(var t,e=0,n=l;n--;)r[n]!=i[n]&&(e++,t=n);if(1==e){if(null===s)return s=t,void(c=i[t]);if(s===t)return}}s=null,c=null}(),function(){a={};for(var t=l;t--;){var e=r[t];void 0===a[e]?a[e]=[t]:(a[e].push(t),a[e].sort(function(t,e){return e-t}))}}();for(var e=0;e<l;e++)t.onLoad(r[e],f,this.loaderid);if(null!==s){var n=t.getImageDataFromUrl(c);if(null!==n&&null===n.callback)v(s,n.svg,n.baseline,"fade-out",this.loaderid)&&(u+=1)}i=r.slice(0)}}function ScrollMap(t){var e=null;this.reset=function(){e=[null,null]},this.getPosition=function(n,r,i){var a=n.offsetHeight,l=n.scrollTop;if(0==l)return 0;null===e[r]&&(e=t());var o=e[r].length-1;if(e[r][o]<=l+a)return e[i][o]-a;var s=a/2,c=findBisect(l+s,e[r]),u=parseFloat(e[i][c.val]*(1-c.part));return e[i][c.val+1]&&(u+=parseFloat(e[i][c.val+1]*c.part)),u-s}}function SyncScroll(t,e,n,r,i,a){var l=function(){n.setPos(t.getPosition(r,0,1))},o=function(){e.setPos(t.getPosition(i,1,0))};this.switchScrollToSrc=function(){i.removeEventListener("scroll",o),r.removeEventListener("scroll",l),r.addEventListener("scroll",l),a.id="container-block-source"},this.switchScrollToResult=function(){r.removeEventListener("scroll",l),i.removeEventListener("scroll",o),i.addEventListener("scroll",o),a.id="container-block-result"}}String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(escapeRegExp(t),"g"),e)};var now=Date.now||function(){return(new Date).getTime()};function debounce(t,e,n){var r,i,a,l,o,s,c,u=0,f=!1,v=!1,d=!0;if("function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);function h(e,n){n&&clearTimeout(n),i=s=c=void 0,e&&(u=now(),a=t.apply(o,r),s||i||(r=o=void 0))}function m(){var t=e-(now()-l);t<=0||t>e?h(c,i):s=setTimeout(m,t)}function p(){h(d,s)}function g(){if(r=arguments,l=now(),o=this,c=d&&(s||!f),!1===v)var n=f&&!s;else{i||f||(u=l);var h=v-(l-u),g=h<=0||h>v;g?(i&&(i=clearTimeout(i)),u=l,a=t.apply(o,r)):i||(i=setTimeout(p,h))}return g&&s?s=clearTimeout(s):s||e===v||(s=setTimeout(m,e)),n&&(g=!0,a=t.apply(o,r)),!g||s||i||(r=o=void 0),a}return e=e<0?0:+e||0,"object"==typeof n&&(f=!!n.leading,v="maxWait"in n&&Math.max(+n.maxWait||0,e),d="trailing"in n?!!n.trailing:d),g.cancel=function(){s&&clearTimeout(s),i&&clearTimeout(i),u=0,i=s=c=void 0},g}