"use strict";function documentReady(t){"loading"!=document.readyState?t():document.addEventListener("DOMContentLoaded",t)}function findBisect(t,e){var n=0,r=e.length-1,i=e[n];if(i>=t)return{val:n,part:0};var l=e[r];if(l<t)return{val:r,part:0};for(;r-n>1;){var a=n+Math.round((r-n)/2),o=e[a];o>=t?(r=a,l=o):(n=a,i=o)}return{val:n,part:(t-i)/(l-i)}}function substrCount(t,e){for(var n=-1,r=-2;-1!=r;)n++,r=e.indexOf(t,r+1);return n}function selectText(t){if(window.getSelection){var e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}}function Animator(t,e){var n,r,i,l,a,o=0,s=0,c=0,u=0,$=null,_=function(t){null===$&&($=t);var s=t-$;s<n?(o=c+r*(Math.cos(i*(s-n))-1),u=r*i*Math.sin(i*(n-s)),e(o),a=requestAnimationFrame(_),f&&(v(l,o),f=!1,$=t)):($=null,u=0,e(c),cancelAnimationFrame(a),f&&(f=!1))},f=!1;function v(t,e){var l;if(c=t,s=e,1e-5>Math.abs(u))l=Math.PI,n=200;else{var a=(c-s)/u/200;n=(c-s)/((1-Math.cos(l=a<0||a>.5?Math.PI*Math.sqrt(1-.5/a):.1))/l/Math.sin(l))/u}i=l/n,r=(c-s)/(1-Math.cos(l))}this.setPos=function(e){(f=null!==$)?l=e:(v(e,o=t()),a=requestAnimationFrame(_))},this.stop=function(){$=null,u=0,cancelAnimationFrame(a),f=!1}}function escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ImagePreloader(){var t={},e=0;function n(){var t;t=this.status>=200&&this.status<400?this.responseText:'<svg height="24" version="1.1" width="24" xmlns="http://www.w3.org/2000/svg"><g transform="translate(0 -1028.4)"><path d="m22 12c0 5.523-4.477 10-10 10-5.5228 0-10-4.477-10-10 0-5.5228 4.4772-10 10-10 5.523 0 10 4.4772 10 10z" fill="#742600" transform="translate(0 1029.4)"/><path d="m22 12c0 5.523-4.477 10-10 10-5.5228 0-10-4.477-10-10 0-5.5228 4.4772-10 10-10 5.523 0 10 4.4772 10 10z" fill="#AB562B" transform="translate(0 1028.4)"/><path d="m7.0503 1037.8 3.5357 3.6-3.5357 3.5 1.4142 1.4 3.5355-3.5 3.536 3.5 1.414-1.4-3.536-3.5 3.536-3.6-1.414-1.4-3.536 3.5-3.5355-3.5-1.4142 1.4z" fill="#742600"/><path d="m7.0503 1036.8 3.5357 3.6-3.5357 3.5 1.4142 1.4 3.5355-3.5 3.536 3.5 1.414-1.4-3.536-3.5 3.536-3.6-1.414-1.4-3.536 3.5-3.5355-3.5-1.4142 1.4z" fill="#ecf0f1"/></g></svg>',r(this.responseURL||this.s2Url,t,this.prefix)}this.onLoad=function(e,r,i){if(t[e])null!==t[e].svg&&r(e,t[e].svg,t[e].baseline,i);else{var l,a,o;t[e]={svg:null,baseline:null,request:(l=e,a=i,(o=new XMLHttpRequest).open("GET",l,!0),o.s2Url=l,o.prefix=a,o.onload=n,o.onerror=function(){},o.send(),o),callback:r}}};var r=function(n,r,i){var l=t[n];if(l){var a=(r=function t(n){var r=n.match(/id=["']([^"']*)["']/g);if(!r)return n;for(var i,l,a,o=r.length;o--;)l="s"+e+(i=(a=r[o]).match(/id=["']([^"']*)["']/)[1]),n=n.replaceAll(a,'id="'+l+'"').replaceAll("#"+i,"#"+l);return e++,n}(r)).match(/postMessage\((?:&quot;|")([\d\|\.\-eE]*)(?:&quot;|")/);if(a)var o=a&&a[1]?a[1].split("|").shift():0;else o=null;l.callback(n,r,o,i),l.svg=r,l.baseline=o,l.request=null,l.callback=null}};this.getImageDataFromUrl=function(e){var n;return t[e]||null}}function ImageLoader(t,e,n){var r=[],i=[],l={},a=0,o=null,s=null,c=null,u=1;this.loaderid=n,this.reset=function(){r=[],a=0,u=1};var $=function(t,e,n,r){var i,a=l[t];if(a&&(i=a.length))for(;i--;){var $=a[i];_($,e,n,$===s?"fade-in":"replace",r)&&(u+=1),$===s&&(clearTimeout(o),s=null,c=null)}};function _(t,e,n,r,i){var l=i+"s2tex_"+t,a=document.getElementById(l),s=a.parentNode,c="fade-out"==r?"0.5":"1",$='<svg class="svg-preview" id="'+l+'" ',_=!1;if("center"===s.style.textAlign&&s.id.match(/eq\:.*$/)&&1==s.childElementCount){_=!0;var f=document.createElement("em");f.innerHTML="("+u+")";var v=document.createElement("span");s.insertBefore(f,a),s.appendChild(v)}var d=e.match(/ height="[\.\d]+" /g)[0].trim().split("=")[1].replace(/"/g,"");null===n?$+='width="13px" height="13px" ':$+='style="--latex_align: '+-n+"pt; --latex_height: "+d+"px; vertical-align:"+-n+'pt; opacity: 1" ';var h=document.createElement("div");h.innerHTML=e.replace("<svg ",$);var p=h.firstElementChild;return h.removeChild(p),s.insertBefore(p,a),s.removeChild(a),"1"!=c&&(o=setTimeout(function(){document.getElementById(l).style.opacity=c},0)),_}this.getHtmlStub=function(t){r[a]="https://i.upmath.me/svg/"+encodeURIComponent(t);var e='<span id="'+this.loaderid+"s2tex_"+a+'"></span>';return a++,e},this.fixDom=function(){(function t(){if(a==i.length){for(var e,n=0,l=a;l--;)r[l]!=i[l]&&(n++,e=l);if(1==n){if(null===s){s=e,c=i[e];return}if(s===e)return}}s=null,c=null})(),function t(){l={};for(var e=a;e--;){var n=r[e];void 0===l[n]?l[n]=[e]:(l[n].push(e),l[n].sort(function(t,e){return e-t}))}}();for(var e=0;e<a;e++)t.onLoad(r[e],$,this.loaderid);if(null!==s){var n=t.getImageDataFromUrl(c);null!==n&&null===n.callback&&_(s,n.svg,n.baseline,"fade-out",this.loaderid)&&(u+=1)}i=r.slice(0)}}function ScrollMap(t){var e=null;this.reset=function(){e=[null,null]},this.getPosition=function(n,r,i){var l=n.offsetHeight,a=n.scrollTop;if(0==a)return 0;null===e[r]&&(e=t());var o=e[r].length-1;if(e[r][o]<=a+l)return e[i][o]-l;var s=l/2,c=findBisect(a+s,e[r]),u=parseFloat(e[i][c.val]*(1-c.part));return e[i][c.val+1]&&(u+=parseFloat(e[i][c.val+1]*c.part)),u-s}}function SyncScroll(t,e,n,r,i,l){var a=function(){n.setPos(t.getPosition(r,0,1))},o=function(){e.setPos(t.getPosition(i,1,0))};this.switchScrollToSrc=function(){i.removeEventListener("scroll",o),r.removeEventListener("scroll",a),r.addEventListener("scroll",a),l.id="container-block-source"},this.switchScrollToResult=function(){r.removeEventListener("scroll",a),i.removeEventListener("scroll",o),i.addEventListener("scroll",o),l.id="container-block-result"}}String.prototype.replaceAll=function(t,e){return this.replace(RegExp(escapeRegExp(t),"g"),e)};var now=Date.now||function(){return new Date().getTime()};function debounce(t,e,n){var r,i,l,a,o,s,c,u=0,$=!1,_=!1,f=!0;if("function"!=typeof t)throw TypeError(FUNC_ERROR_TEXT);function v(e,n){n&&clearTimeout(n),i=s=c=void 0,!e||(u=now(),l=t.apply(o,r),s||i||(r=o=void 0))}function d(){var t=e-(now()-a);t<=0||t>e?v(c,i):s=setTimeout(d,t)}function h(){v(f,s)}function p(){if(r=arguments,a=now(),o=this,c=f&&(s||!$),!1===_)var n=$&&!s;else{i||$||(u=a);var v=_-(a-u),p=v<=0||v>_;p?(i&&(i=clearTimeout(i)),u=a,l=t.apply(o,r)):i||(i=setTimeout(h,v))}return p&&s?s=clearTimeout(s):s||e===_||(s=setTimeout(d,e)),n&&(p=!0,l=t.apply(o,r)),!p||s||i||(r=o=void 0),l}return e=e<0?0:+e||0,"object"==typeof n&&($=!!n.leading,_="maxWait"in n&&Math.max(+n.maxWait||0,e),f="trailing"in n?!!n.trailing:f),p.cancel=function t(){s&&clearTimeout(s),i&&clearTimeout(i),u=0,i=s=c=void 0},p}